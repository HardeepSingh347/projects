<div id="page-content-wrapper">
  <div class="contBox mt-4">
    <h1 class="d-flex justify-content-between">
      Documents
      <div class="dropdown nndrop">
        <a routerLink="/dashboard/document/create" class="new-user">
          <img
            src="assets/images/add-file.png"
            title="Add new document"
            alt=""
            width="35"
          />
        </a>
      </div>
    </h1>

    <!-- <div class="row mt-4">
      <ng-container *ngFor="let document of (documents$ | async)  | paginate: { itemsPerPage: 2, currentPage: pageNumber }">
        <div class="col-md-6 col-lg-4">
          <div class="boxsh">
            <img
              [src]="document?.url | docType"
              [alt]="document?.name | titlecase"
              class="img-fluid bgmain"
            />
            <div class="d-flex p-3">
              <div class="ml-3">
                <h3>
                  {{ document?.name | titlecase }}
                </h3>
                <p>{{ document?.createdAt | date }}</p>
                <p>{{ document?.size / 1048576 | number }} MBs</p>
              </div>
              <div class="ml-auto">
                <div class="dropdown">
                  <button
                    class="btn btn-secondary dropdown-toggle"
                    type="button"
                    id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                  </button>
                  <div
                    class="dropdown-menu"
                    aria-labelledby="dropdownMenuButton"
                  >
                    <a
                      class="dropdown-item"
                      [routerLink]="'/dashboard/document/edit/' + document?._id"
                      >Update</a
                    >
                    <a
                      class="dropdown-item"
                      [routerLink]="'/dashboard/document/view/' + document?._id"
                      >View</a
                    >
                    <a
                      class="dropdown-item"
                      (click)="onDownloadDocument(document._id, document?.name)"
                      >Download</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls> -->

    <div class="row">
      <div class="col-md-2 search_box">
        <mat-form-field class="example-full-width">
          <input
            matInput
            placeholder="Search..."
            name="searchValue"
            (keyup.enter)="applySearch()"
            [(ngModel)]="searchValue"
          />
        </mat-form-field>
      </div>
      <div class="col-md-2 search_button_box">
        <button
          type="button"
          class="btn btn-outline-primary search_button_button"
          title="Search"
          (click)="applySearch()"
        >
          <mat-icon>search</mat-icon>
        </button>
        <button
          type="button"
          class="btn btn-outline-danger search_button_button"
          title="Reset"
          (click)="onResetFilters()"
        >
          <mat-icon>replay</mat-icon>
        </button>
      </div>
      <div class="col-md-2">
        <mat-form-field>
          <mat-label>Sector</mat-label>
          <mat-select [(ngModel)]="selectedSector" (ngModelChange)="onSectorChange(sectorOptions.value)" #sectorOptions>
            <mat-option [value]="undefined">All Sectors</mat-option>
            <mat-option *ngFor="let sector of sectors" [value]="sector">{{
              sector
            }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-2">
        <mat-form-field>
          <mat-label>Period</mat-label>
          <mat-select [(ngModel)]="selectedPeriod" (ngModelChange)="onPeriodChange(periodOptions.value)" #periodOptions>
            <mat-option [value]="undefined">All Period</mat-option>
            <mat-option *ngFor="let period of periods" [value]="period">{{
              period
            }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-2">
        <mat-form-field class="example-full-width">
          <input
            matInput
            placeholder="Upload Date"
            name="selectedDay"
            [matDatepicker]="myDatepicker"
            [(ngModel)]="selectedDay"
            (dateChange)="onDateChange()"
            [max]="maxDate"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="myDatepicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #myDatepicker></mat-datepicker>
        </mat-form-field>
      </div>
    </div>
    <div class="row mat-table">
      <div class="col-12">
        <div class="mat-elevation-z8">
          <table
            mat-table
            [dataSource]="dataSource"
            matSort
            (matSortChange)="sortData($event)"
            style="width: 100%;"
          >
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Name
              </th>
              <td mat-cell *matCellDef="let row">{{ row?.name }}</td>
            </ng-container>
            <ng-container matColumnDef="documentType">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Type
              </th>
              <td mat-cell *matCellDef="let row">{{ row?.documentType }}</td>
            </ng-container>
            <ng-container matColumnDef="sector">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Sector
              </th>
              <td mat-cell *matCellDef="let row">{{ row?.sector }}</td>
            </ng-container>
            <ng-container matColumnDef="periodName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Period
              </th>
              <td mat-cell *matCellDef="let row">{{ row?.periodName }}</td>
            </ng-container>
            <ng-container matColumnDef="size">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Size
              </th>
              <td mat-cell *matCellDef="let row">
                {{ row?.size / 1048576 | number }} MBs
              </td>
            </ng-container>
            <ng-container matColumnDef="company">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Company
              </th>
              <td mat-cell *matCellDef="let row">{{ row?.company }}</td>
            </ng-container>
            <ng-container matColumnDef="user">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                User
              </th>
              <td mat-cell *matCellDef="let row">{{ row?.user }}</td>
            </ng-container>
            <ng-container matColumnDef="createdAt">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Created At
              </th>
              <td mat-cell *matCellDef="let row">
                {{ row?.createdAt | date: "medium" }}
              </td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>
                Actions
              </th>
              <td mat-cell *matCellDef="let row" class="td-actions">
                <div class="action-col">
                  <button
                    mat-raised-button=""
                    type="button"
                    class="btn btn-success btn-link"
                    (click)="onView(row?._id)"
                  >
                    <span class="mat-button-wrapper">
                      <i class="material-icons">visibility</i>
                    </span>
                    <div
                      class="mat-button-ripple mat-ripple"
                      matripple=""
                    ></div>
                    <div class="mat-button-focus-overlay"></div>
                  </button>
                  <button
                    mat-raised-button=""
                    type="button"
                    class="btn btn-warning btn-link"
                    (click)="onUpdate(row?._id)"
                  >
                    <span class="mat-button-wrapper"
                      ><i class="material-icons">edit</i>
                    </span>
                    <div
                      class="mat-button-ripple mat-ripple"
                      matripple=""
                    ></div>
                    <div class="mat-button-focus-overlay"></div>
                  </button>
                  <button
                    mat-raised-button=""
                    type="button"
                    class="btn btn-warning btn-link"
                    (click)="onDownloadDocument(row?._id, row?.name)"
                  >
                    <span class="mat-button-wrapper"
                      ><i class="material-icons">cloud_download</i>
                    </span>
                    <div
                      class="mat-button-ripple mat-ripple"
                      matripple=""
                    ></div>
                    <div class="mat-button-focus-overlay"></div>
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
          <mat-paginator
            [pageSizeOptions]="pageSizeOptions"
            (page)="pageEvent = onPageChange($event)"
          ></mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
